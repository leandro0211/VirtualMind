USE master
IF EXISTS(select * from sys.databases where name='VirtualMindDB')
DROP DATABASE VirtualMindDB
GO
CREATE DATABASE VirtualMindDB
go
USE VirtualMindDB
go

DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'VirtualMind.DAL.VirtualMindContext'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201809222123385_InitialCreate'
BEGIN
    CREATE TABLE [dbo].[Usuarios] (
        [ID] [int] NOT NULL IDENTITY,
        [Nombre] [nvarchar](max),
        [Apellido] [nvarchar](max),
        [Email] [nvarchar](max),
        [Password] [nvarchar](max),
        CONSTRAINT [PK_dbo.Usuarios] PRIMARY KEY ([ID])
    )
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201809222123385_InitialCreate', N'VirtualMind.DAL.VirtualMindContext',  0x1F8B0800000000000400CD57CD6EE33610BE17E83B103CB540D6CCCFA50DA45DB87652188D936095E44E4B63872845AA2495DACFD6431FA9AFD0A1FE2DD9899DDD2D0A5F2C6AE69B3FCE37A37FFEFA3BF8B44E257901638556213D1B9D52022AD68950AB90E66EF9E127FAE9E3F7DF055749BA264FB5DC8597434D6543FAEC5C76C9988D9F21E576948AD868AB976E14EB94F144B3F3D3D39FD9D9190384A0884548F039574EA4503CE0E344AB1832977339D709485B9DE39BA84025B73C059BF11842FA244C212854329A8E6F28194BC1D18D08E49212AE9476DCA193978F162267B45A45191E70F9B0C900E5965C5AA89CBF6CC50F8DE3F4DCC7C15AC51A2ACEADD3E9918067175562585FFD5DE9A54DE23075579862B7F15117E90BE9A3CDB9119A92BEADCB89345E6E3BB965294695D609E9BC3B696E025E18FF3B21935CBADC40A8207786CB13729F2FA4887F83CD83FE1D54A87229BBEEA183F86EEB008FEE8DCEC0B8CD6758564ECFA694B06D3DD6576CD43A3A653C33E52ECE29B945E37C21A1A97E27F6C86903BF8202C31D24F7DC393058BC590245FE06D67BB66E75BA3050DBC30B878D43C99CAF6F40ADDC7348F12F25D7620D497D52F9F0A804F6192A3993C35B66C619482912FDCD0D5DA55CC86F6EE59E5BFBA736C9573614B0F6D20F5B0159C6718185AE9CE85C68FF0AD66E476B208B54DD612B8BDB8195D011B8ED26B394B4AE94E4346AFA6F97CB8D732DF7B192FC6A92647B583298F32CC3EC7558B33A21514999930FD1F1749296182CB63B58A5F1B6B1845DC457D07B8BA6D1D36B61AC9B72C717DCD76F92A403B11DA5D893E6DA602FDB7D2269935F2BF8FF83BAFB09D2D4A587D1E6F11A434B910E8A28A171A565D4816631B9B8E46607334DB4CC53B58FDD5ED3AEB9A68B509F1D8ED2524917A73D3D1CA9E28A2E4C75743846CB045D98F6748814B05E59FAB56783E2F7E647FF32BDD68E7D91C67AD396BDF60BAA56787B9319F446294209A6E84524BE2FA28D75908EBCC028FA434EA4C0785B8139576209D6952396E23E71DEDB87FE3FBB09B33691872D28FFF99A207C52DF5C04065BC4319B817AE1267EE6E68794AF7FEC62BD67FA7F11D8D684FF22A4FE143F02ECB8493D9C22070DE1D76670D96B214D163EABA59BEDEC7EE7841EB67EC0BA9F3AC114AC58B510FEC34741EC7BAA05AD65666AA9EB8463685D8F6A915E3DE6E07882191A1B27963C76F83A066B8BCDEA89CBBC28FE029299BACB5D96BBB1B5902EE4D68E1BB0D7ED176BC8B6CFC15DE69FECD70801DD141802DCA95F722193C6EFEB61C7ED83F097A56A63F40A374B845B6D1AA45BAD0E04AAD237850C9427810748338960F64E45FC05DEE31B6E9337B0E2F1A666F0FD206F17623BEDC154F095E1A9AD305A7DFFF9CEFCF7FBC77F01C7AE1E2AF10F0000 , N'6.1.3-40302')
END

